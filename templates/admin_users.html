{% extends "_base.html" %}
{% set page_title = "User administration" %}
{% set active = "/admin/users" %}

{% block body %}
<div class="max-w-5xl mx-auto card">
<h2>Users</h2>

<table class="w-full text-sm">
  <thead>
    <tr class="bg-gray-100 text-left">
      <th class="px-4 py-2">Username</th>
      <th class="px-2 py-2">Role</th>
      <th class="px-2 py-2">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr class="odd:bg-white even:bg-gray-50 h-12">
      <td class="px-4 text-base">{{ u.username }}</td>
      <td class="px-2">{{ u.role }}</td>
      <td class="px-2 space-x-2 text-sm">
        <form action="/admin/users/delete"
              method="post"
              class="inline"
              onsubmit="return confirm('Delete user &ldquo;{{ u.username }}&rdquo;?');">
          <input type="hidden" name="username" value="{{ u.username }}">
          <button title="Delete user">🗑️</button>
        </form>
        <a href="/admin/users/{{ u.username }}/edit" title="Edit user">✏️</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="mt-8 mb-2">Add new user</h3>
<form action="/admin/users" method="post" class="space-y-2 max-w-xs">
  <label class="block">Username
    <input name="username" class="w-full" required>
  </label>
  <label class="block">Password
    <input name="password" type="password" class="w-full" required>
  </label>
  <label class="block">Role
    <select name="role" class="w-full">
      <option value="user">user</option>
      <option value="owner">owner</option>
  </select>
  </label>
  <button class="btn w-full">Create</button>
</form>
</div>
{% endblock %}
