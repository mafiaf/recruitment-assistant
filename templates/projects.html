{% extends "_base.html" %}
{% set active = "/projects" %}
{% set page_title = "Projects" %}

{% block body %}
<div class="space-y-4">
  {% if projects %}
    {% for p in projects %}
      <details class="bg-white/70 backdrop-blur p-4 rounded shadow">
        <summary class="cursor-pointer">
          {{ p.description|truncate(80, True, 'â€¦') }}
        </summary>
        <div class="mt-2 text-sm whitespace-pre-wrap">{{ p.description }}</div>
        <div class="overflow-auto">{{ p.table_html | safe }}</div>
        <form action="/delete_project" method="post" class="mt-2">
          <input type="hidden" name="ts" value="{{ p.ts.isoformat() }}">
          <button type="submit" class="text-red-600 text-sm hover:underline" onclick="return confirm('Delete project?')">delete</button>
        </form>
      </details>
    {% endfor %}
  {% else %}
    <p>No past projects found.</p>
  {% endif %}
</div>
{% endblock %}
