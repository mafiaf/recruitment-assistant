<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Upload Résumé</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col bg-gray-50">
  <header class="shadow px-6 py-4 bg-white font-semibold text-xl">Recruitment Assistant</header>

  <main class="flex-1 flex flex-col items-center p-6 gap-8">
    <!-- ① Dropzone -->
    <form id="resume-form" class="w-full max-w-xl border-4 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center py-16 bg-white">
      <input type="file" name="file" accept=".pdf,.docx" class="hidden" id="resume-file" />
      <p class="text-lg text-gray-500 mb-4">Drag & drop a résumé PDF / DOCX here<br>or click to browse</p>
      <button type="button" id="select-btn" class="px-4 py-2 rounded bg-blue-600 text-white">Browse files</button>
    </form>

    <!-- ② Recent uploads table -->
    <section class="w-full max-w-5xl">
      <h2 class="text-lg font-medium mb-2">Recent uploads</h2>
      <table class="w-full text-sm border rounded-xl overflow-hidden shadow">
        <thead>
          <tr class="bg-gray-100 text-left">
            <th class="px-4 py-2">Name</th>
            <th class="px-2 py-2">Added</th>
            <th class="px-2 py-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for r in resumes %}
          <tr class="odd:bg-white even:bg-gray-50">
            <td class="px-4 py-2">{{ r.name }}</td>
            <td class="px-2 py-2">{{ r.added|default('—') }}</td>
            <td class="px-2 py-2 space-x-3">
              <a href="/resumes#{{ r.id }}" class="text-blue-600 hover:underline">edit</a>
              <form action="/delete_resume" method="post" class="inline">
                <input type="hidden" name="id" value="{{ r.id }}" />
                <button class="text-red-600 hover:underline" onclick="return confirm('Delete?')">delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </main>

<script>
// open file picker
document.getElementById('select-btn').onclick = () => document.getElementById('resume-file').click();
// auto‑submit on choose
const f = document.getElementById('resume-file');
f.onchange = () => f.form.submit();
</script>
</body>
</html>